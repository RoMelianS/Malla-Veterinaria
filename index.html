<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Malla Medicina Veterinaria - Universidad de Los Lagos</title>
  <style>
    /* 游꿛 Paleta arm칩nica:
       Verde menta: #DFF5E1
       Verde suave: #A8D5BA
       Verde medio: #6DBE8A
       Verde oscuro suave: #3E8E61
       Verde bosque: #2E6D4B
    */

    body {
      font-family: "Segoe UI", sans-serif;
      background-color: #DFF5E1;
      margin: 0;
      padding: 1rem;
      color: #2E6D4B;
    }

    h1 {
      text-align: center;
      color: #2E6D4B;
      text-shadow: 1px 1px 2px rgba(46, 109, 75, 0.2);
    }

    .malla {
      display: flex;
      flex-direction: column;
      gap: 2rem;
      margin-top: 2rem;
    }

    .fila {
      display: flex;
      justify-content: center;
      flex-wrap: wrap;
      gap: 1rem;
    }

    .semestre {
      flex: 1;
      background-color: #A8D5BA;
      border: 2px solid #6DBE8A;
      border-radius: 12px;
      padding: 1rem;
      min-width: 220px;
      box-shadow: 0 4px 8px rgba(46, 109, 75, 0.15);
      transition: transform 0.2s ease, box-shadow 0.2s ease;
    }

    .semestre:hover {
      transform: translateY(-4px);
      box-shadow: 0 6px 12px rgba(46, 109, 75, 0.25);
    }

    .semestre h2 {
      text-align: center;
      color: #2E6D4B;
      margin-bottom: 0.8rem;
    }

    .ramo {
      background-color: #EAF9EE;
      margin: 0.5rem 0;
      padding: 0.6rem;
      border-radius: 6px;
      cursor: pointer;
      transition: background-color 0.3s ease, transform 0.2s ease;
      position: relative;
      font-size: 0.95rem;
      border-left: 4px solid #6DBE8A;
    }

    .ramo:hover {
      background-color: #CFF0D6;
      transform: translateX(3px);
    }

    .ramo.aprobado {
      background-color: #B4E2C2;
      text-decoration: line-through;
      color: #3E8E61;
      border-left-color: #3E8E61;
    }

    .ramo.bloqueado {
      background-color: #C6DCC9;
      cursor: not-allowed;
      color: #7A8F7F;
      border-left-color: #7A8F7F;
    }

    .tooltip {
      visibility: hidden;
      background-color: #2E6D4B;
      color: #fff;
      text-align: center;
      border-radius: 6px;
      padding: 5px 8px;
      position: absolute;
      z-index: 1;
      bottom: 110%;
      left: 50%;
      transform: translateX(-50%);
      opacity: 0;
      transition: opacity 0.3s;
      font-size: 0.8rem;
      white-space: nowrap;
    }

    .ramo:hover .tooltip {
      visibility: visible;
      opacity: 1;
    }
  </style>
</head>
<body>
  <h1>Malla Medicina Veterinaria - Universidad de Los Lagos</h1>
  <div class="malla">
    <div class="fila" id="fila-superior"></div>
    <div class="fila" id="fila-inferior"></div>
  </div>

  <script>
    const ramos = [
      { id: "intro", nombre: "Introducci칩n a las Ciencias Veterinarias", semestre: 1, prereq: [] },
      { id: "zoo", nombre: "Zoolog칤a", semestre: 1, prereq: [] },
      { id: "matematicas", nombre: "Matem치ticas", semestre: 1, prereq: [] },
      { id: "quimica", nombre: "Qu칤mica Org치nica", semestre: 1, prereq: [] },
      { id: "biocel", nombre: "Biolog칤a Celular", semestre: 1, prereq: [] },
      { id: "comunicacion", nombre: "Comunicaci칩n", semestre: 1, prereq: [] },
      { id: "ecologia", nombre: "Ecolog칤a", semestre: 2, prereq: [] },
      { id: "anato", nombre: "Anatom칤a Animal I", semestre: 2, prereq: [] },
      { id: "fisica", nombre: "F칤sica", semestre: 2, prereq: [] },
      { id: "bioquimica", nombre: "Bioqu칤mica", semestre: 2, prereq: ["quimica","biocel"] },
      { id: "histo", nombre: "Histolog칤a y Embriolog칤a", semestre: 2, prereq: [] },
      { id: "ciudadania", nombre: "Ciudadan칤a para el buen vivir", semestre: 2, prereq: [] }
    ];

    const estado = JSON.parse(localStorage.getItem("estadoRamos") || "{}");

    function guardarEstado() {
      localStorage.setItem("estadoRamos", JSON.stringify(estado));
    }

    function crearRamo(ramo) {
      const div = document.createElement("div");
      div.className = "ramo";
      div.textContent = ramo.nombre;
      div.dataset.id = ramo.id;

      if (estado[ramo.id]) {
        div.classList.add("aprobado");
      } else if (ramo.prereq.some(p => !estado[p])) {
        div.classList.add("bloqueado");
        const tooltip = document.createElement("div");
        tooltip.className = "tooltip";
        tooltip.textContent = "Falta aprobar: " + ramo.prereq.filter(p => !estado[p]).join(", ");
        div.appendChild(tooltip);
      }

      div.addEventListener("click", () => {
        if (div.classList.contains("bloqueado")) return;
        div.classList.toggle("aprobado");
        estado[ramo.id] = div.classList.contains("aprobado");
        guardarEstado();
        location.reload();
      });
      return div;
    }

    for (let s = 1; s <= 2; s++) {
      const cont = document.createElement("div");
      cont.className = "semestre";
      cont.innerHTML = `<h2>Semestre ${s}</h2>`;
      ramos.filter(r => r.semestre === s).forEach(r => cont.appendChild(crearRamo(r)));
      (s % 2 === 1 ? document.getElementById("fila-superior") : document.getElementById("fila-inferior")).appendChild(cont);
    }
  </script>
</body>
</html>
